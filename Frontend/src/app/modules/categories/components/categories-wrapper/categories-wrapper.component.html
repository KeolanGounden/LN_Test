<div class="flex flex-col !h-auto">



    <div class="flex flex-row items-center justify-between">

       <div #headerRef>
      <app-page-header [headerConfig]="headerConfig"></app-page-header>

    </div>

    @if(actionButtons){
    <div class="max-w-3/5 w-3/5 pr-2">

        <app-button-row [buttonConfig]="actionButtons"></app-button-row>
    </div>
    }
</div>

    <span class="mat-card-elevation flex-1 !pr-3 pl-4">

          <ul ngTree #tree="ngTree" [(values)]="selected" class="basic-tree">
                        <ng-template
                          [ngTemplateOutlet]="treeNodes"
                          [ngTemplateOutletContext]="{nodes: (nodes$ | async) || [], parent: tree}"
                        />
                        </ul>
       
    </span>


</div>

 <ng-template #treeNodes let-nodes="nodes" let-parent="parent">
  @for (node of nodes; track node.value) {
    <li
      ngTreeItem
      [parent]="parent"
      [value]="node.value"
      [label]="node.name"
      [disabled]="node.disabled"
      [(expanded)]="node.expanded"
      #treeItem="ngTreeItem"
    >
      <span aria-hidden="true" class="material-symbols-outlined expand-icon" translate="no">{{
        node?.children?.length > 0 ? 'chevron_right' : ''
      }}</span>
      <span aria-hidden="true" class="material-symbols-outlined" translate="no">{{
        node?.children?.length > 0 ? 'folder' : 'docs'
      }}</span>
      {{ node.name }}

    </li>
    @if (node?.children?.length > 0) {
      <ul role="group">
        <ng-template ngTreeItemGroup [ownedBy]="treeItem" #group="ngTreeItemGroup">
          <ng-template
            [ngTemplateOutlet]="treeNodes"
            [ngTemplateOutletContext]="{nodes: node.children, parent: group}"
          />
        </ng-template>
      </ul>
    }
  }
</ng-template>